## 2. 数据库连接与元数据同步

### 2.1 数据源配置

在 SQLBot 中添加 NC 数据源时的关键配置：

```yaml
数据源名称: NC财务系统-生产库
数据库类型: Oracle / SQL Server / PostgreSQL  # 根据实际选择
数据库地址: <NC数据库服务器地址>
端口: 1521 / 1433 / 5432
数据库名: ncprod / nccdb
用户名: <只读账号>  # 强烈建议使用只读账号
密码: <密码>
```

> **安全建议**：为 SQLBot 创建专用的**只读数据库账号**，仅授予 SELECT 权限。

### 2.2 元数据同步策略

由于 NC 系统表数量众多（通常 500+），建议**选择性同步**：

1. **核心业务表**：总账、应收、应付、固定资产等核心表
2. **基础档案表**：科目、组织、供应商、客户等
3. **排除系统表**：排除 `md_`、`pub_`、`sm_` 等系统管理表

### 2.3 推荐同步的表清单

```
# 总账模块
gl_voucher          # 凭证主表
gl_detail           # 凭证分录表
gl_balance          # 总账余额表
gl_freevalue        # 辅助核算值
gl_accass           # 辅助核算余额

# 科目与组织
bd_accsubj          # 会计科目表
bd_accassitem       # 辅助核算项
org_orgs            # 组织表
org_financeorg      # 财务组织

# 应收应付
ap_payplan          # 付款计划
ap_paybill          # 付款单
ar_recplan          # 收款计划
ar_recbill          # 收款单

# 固定资产
fa_card             # 资产卡片
fa_depreciation     # 折旧信息
fa_assetreduce      # 减值信息

# 基础档案
bd_supplier         # 供应商
bd_customer         # 客户
bd_bankaccbas       # 银行账户
bd_currtype         # 币种
bd_invcl            # 存货分类
bd_invbasdoc        # 存货档案
```

